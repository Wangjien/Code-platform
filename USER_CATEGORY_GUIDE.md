# 🏷️ 用户自定义分类功能使用指南

## 📋 功能概述

**用户自定义分类**是代码分享平台的新功能，允许用户创建和管理个人专属的代码分类，让代码组织更加个性化和高效。

### ✨ **核心特性**
- 🎨 **自定义分类**：创建个人专属的分类标签
- 🎨 **颜色标识**：为每个分类设置独特的颜色
- 📊 **智能统计**：实时显示每个分类下的代码数量
- 🔄 **拖拽排序**：自由调整分类显示顺序
- 🔍 **快速筛选**：首页支持按个人分类筛选代码
- 📝 **详细描述**：为分类添加说明信息

## 🚀 **快速开始**

### **1. 创建第一个分类**

1. **登录账户** → 点击右上角头像 → **个人中心**
2. 切换到 **"分类管理"** 标签页
3. 点击 **"创建新分类"** 按钮
4. 填写分类信息：
   - **分类名称**：如"我的工具包"、"数据处理"、"可视化脚本"
   - **分类描述**：可选，描述该分类的用途
   - **分类颜色**：选择喜欢的颜色，便于识别

### **2. 发布代码时使用分类**

1. 进入 **代码发布** 页面
2. 填写代码基本信息（标题、描述、系统分类等）
3. 在 **"个人分类"** 下拉框中选择您创建的分类
4. 完成发布 - 代码将同时属于系统分类和您的个人分类

### **3. 使用分类筛选代码**

1. 在 **首页** 的筛选栏中
2. 选择 **"个人分类"** 下拉框（仅对已登录用户显示）
3. 选择想要查看的分类
4. 系统将显示该分类下的所有代码

## 🛠️ **详细功能说明**

### **分类管理功能**

#### **创建分类**
- **名称限制**：1-50个字符，同一用户下不能重复
- **描述限制**：最多200个字符，可为空
- **颜色选择**：19种预设颜色 + 自定义颜色
- **排序规则**：新创建的分类自动排在最后

#### **编辑分类**
- 点击分类卡片右侧的 **编辑按钮**
- 可修改名称、描述、颜色
- 修改名称时会检查是否与其他分类冲突

#### **删除分类**
- 点击分类卡片右侧的 **删除按钮**
- **重要**：只能删除没有代码的分类
- 删除前系统会确认是否有代码引用该分类

### **代码发布功能**

#### **双重分类体系**
- **系统分类**（必选）：如"单细胞分析"、"CNV检测"、"WES分析"
- **个人分类**（可选）：用户自定义的分类标签
- 一个代码可以同时属于系统分类和个人分类

#### **分类显示**
- 代码列表中会显示两种分类信息
- 个人分类显示对应的自定义颜色
- 未设置个人分类的代码不显示个人分类标签

### **筛选和浏览功能**

#### **首页筛选**
- **系统分类筛选**：所有用户可见，筛选全站代码
- **个人分类筛选**：仅登录用户可见，筛选自己分类下的代码
- 支持组合筛选：编程语言 + 系统分类 + 个人分类

#### **个人中心浏览**
- 在"我的代码"标签页查看所有自己发布的代码
- 代码卡片显示系统分类和个人分类信息
- 支持按分类快速定位代码

## 💡 **使用技巧**

### **分类命名建议**
- **按用途分类**：工具脚本、数据处理、结果展示、学习笔记
- **按项目分类**：项目A、项目B、临时实验、正式分析
- **按技能分类**：Python基础、R进阶、生信流程、统计方法
- **按状态分类**：开发中、已完成、需优化、常用工具

### **颜色使用建议**
- **红色系**：紧急、重要、核心功能
- **绿色系**：已完成、稳定版本、推荐使用
- **蓝色系**：工具类、通用函数、基础组件
- **黄色系**：实验性、学习用、待优化
- **紫色系**：高级功能、复杂算法、专业工具

### **管理最佳实践**
1. **控制数量**：建议创建5-10个分类，过多会影响管理效率
2. **定期整理**：删除不再使用的分类，合并相似分类
3. **描述详细**：为分类添加清晰的描述，方便后期维护
4. **颜色统一**：同类型的分类使用相近颜色，建立视觉规律

## 🔧 **API接口说明**

### **用户分类管理**
```bash
# 获取用户分类列表
GET /api/user/categories

# 创建新分类
POST /api/user/categories
{
  "name": "分类名称",
  "description": "分类描述",
  "color": "#409EFF"
}

# 更新分类信息
PUT /api/user/categories/{id}
{
  "name": "新名称",
  "description": "新描述",
  "color": "#67C23A"
}

# 删除分类
DELETE /api/user/categories/{id}

# 批量更新排序
POST /api/user/categories/sort
{
  "category_orders": [1, 3, 2, 4]
}
```

### **代码发布和筛选**
```bash
# 发布代码（包含用户分类）
POST /api/codes
{
  "title": "代码标题",
  "category_id": 1,
  "user_category_id": 5,  # 可选
  ...
}

# 按用户分类筛选代码
GET /api/codes?user_category_id=5
```

## 🐛 **常见问题**

### **Q: 为什么看不到"个人分类"选项？**
**A**: 请确保已登录且创建了至少一个个人分类。未登录用户或没有创建分类的用户不会显示此选项。

### **Q: 可以创建多少个分类？**
**A**: 系统没有硬性限制，但建议控制在10个以内，过多分类会影响管理效率。

### **Q: 删除分类后，相关代码会怎样？**
**A**: 系统会阻止删除有代码引用的分类。需要先将相关代码移除或重新分类，才能删除该分类。

### **Q: 分类颜色有什么限制？**
**A**: 支持所有有效的颜色值，包括19种预设颜色和自定义颜色。建议选择对比度较高的颜色以便识别。

### **Q: 可以批量修改代码的分类吗？**
**A**: 目前需要逐个编辑代码来修改分类。批量操作功能将在后续版本中提供。

### **Q: 其他用户能看到我的个人分类吗？**
**A**: 其他用户可以看到您代码的个人分类标签和颜色，但无法使用您的分类进行筛选。每个用户的分类是完全独立的。

## 🎯 **注意事项**

1. **权限控制**：只能管理自己创建的分类，无法访问其他用户的分类
2. **数据安全**：删除分类前请确认没有重要代码引用，删除后无法恢复
3. **性能优化**：大量分类可能影响页面加载速度，建议合理控制数量
4. **兼容性**：旧版本发布的代码不会自动分配个人分类，需要手动编辑添加

## 📈 **后续功能规划**

- 🔄 **分类导入导出**：支持分类配置的备份和恢复
- 📊 **分类统计分析**：提供分类使用情况的可视化报表
- 🏷️ **分类模板**：提供常用分类的预设模板
- 🔍 **智能分类建议**：基于代码内容自动推荐合适的分类
- 👥 **分类共享**：允许用户之间共享优秀的分类体系

---

**功能版本**：v1.0.0  
**更新时间**：2026年1月10日  
**支持联系**：如有问题请通过个人中心联系管理员
